+++
title = "レッスン 43"
date = "2024-10-08T12:00:00+09:00"
author = "小野寺 健"
description = "スクラッチでしんけいすいじゃくゲームをつくろう"
showFullContent = false
readingTime = false
tags = ["Scratch", "スクラッチ", "ゲーム"]
+++
# スクラッチで「しんけいすいじゃく」ゲームをつくろう
スクラッチで「しんけいすいじゃく」ゲームをつくりましょう。

## 「しんけいすいじゃく」ゲームとは
トランプなどで、カードをうらがえしにしてならべ、おなじすうじのカードをめくったら
カードをとりのぞきます。

ふつうはなんにんかであそび、おなじすうじのカードをとりのぞいているあいだは、
つづけてかーどをめくることができ、ちがうすうじがでたらつぎのひとにこうたいします。

たくさん、カードをとれたひとがかちです。

## こんかいつくるゲーム
こんかいは、トランプではなく、おなじえが２くみずつあるカードを１０くみつくり、
すくないしっぱいかいすうですべてのカードをとりのぞけるかをきそうゲームにします。

ステップ１からステップ９までじゅんばんにつくっていきますが、むずかしかったらとちゅうからはじめてもかまいません。

## カードをでたらめにならべる（ステップ１）
### でたらめなじゅんばんをつくる
ここはむずかしいので、せんせいがつくったプログラムをコピペします。

https://scratch.mit.edu/projects/1078257677

みどりのはたをおすと「順番」というなまえの１〜２０までのリストに、０〜１９までのすうじが
まいかいでたらめなじゅんばんでせっていされるようになっています。このすうじがばしょをいみします。

コピーするほうほうは「リミックス」をクリックするか、「コンピュータに保存する」でてきとうななまえのファイルにほぞんし、
いったんスクラッチをしゅうりょうし、あらたにスクラッチをたちあげて、さきほどほぞんしたファイルを「コンピュータから読み込む」でよみだします。

## カードのうらのえをきめる
スプライトをえらぶから、カードのうらにするえをえらびます。
カードのうらっぽいえをえらんでください。

「Heart」の「コード」のプログラムをあたらしくえらんだスプライトにうつします。

うつしおわったら、「Heart」のスプライトはふようなのでけします。

## カードのおもてのえをきめる
スプライトのコスチュームのタグをえらんで、いちばんうえいがいのコスチュームをけします。

つぎに、「コスチュームをえらぶ」からおもてのえをえらびます。
さいしゅうてきに１０くみつくるので、「どうぶつ」とかテーマをきめておきましょう。

れいでは「ねこ」にしていますが、もちろんじぶんのすきなものでかまいません。

なお、あまりくべつのつきにくいえどうしはさけましょう。

### でたらめなじゅんばんをつかってカードをならべる（ステップ２）
さいしょにつくったスプライトは１ばんのカードにします。

でたらめなじゅんばんができあがったら、「並び替え」というメッセージをおくります。

「並び替え」というメッセージをうけとったら、「順番」のリストの１ばんめにかいてあるばんごうのばしょにいどうします。

ならべかたは、よこに５コ、たてに４コの５ｘ４にならべます。

ならべるいちはちょっとむずかしいですが、

ｘざひょう　＝　ー２００　＋　（じゅんばんの１ばんめ　を　５　でわったあまり）　＊　１００

ｙざひょう　＝　１００　ー　（じゅんばんの１ばんめ　／　５）の切り下げ　＊　８０

ｘざひょうとｙざひょうはべつべつのブロックでしていしても、おなじブロックでまとめてしていしてもどちらでもかまいません。

にします。

### じぶんじしんのクローンをつくって、カードをならべる（ステップ２のつづき）
ここまでできたら、じぶんじしんのクローンをつくって２くみのカードにします。クローンは２ばんのカードにします。

クローンされたら、「順番」のリストの２ばんめにかいてあるばんごうのばしょにいどうします。

ならべるいちは、１ばんのカードの「１ばんめ」のぶぶんを「２ばんめ」にかきかえて

ｘざひょう　＝　ー２００　＋　（じゅんばんの２ばんめ　を　５　でわったあまり）　＊　１００

ｙざひょう　＝　１００　ー　（じゅんばんの２ばんめ　／　５）の切り下げ　＊　８０

にします。

ｘざひょうとｙざひょうはべつべつのブロックでしていしても、おなじブロックでまとめてしていしてもどちらでもかまいません。

https://scratch.mit.edu/projects/1078261839

「順番」のリストをひょうじするのをやめて、みどりのはたをおすと、
２このスプライト（ハート）がまいかいでたらめないちにひょうじされます。

### カードをおしたらおもてのえにかわる（ステップ３）
カードをおしたらおもてのえにかわるようにします。

まずさいしょはうらのかーどがひょうじされているように、
「並び替え」をうけとったすぐあとに
「表示する」と
「コスチュームをうらのえ（たとえば「heart red」）にする」をいれておきます。

つぎに、「このスプライトが押されたとき」をついかして、
そのうしろに「コスチュームをおもてのえ（たとえば「Cat-a」）にする」をついかします。

このままでもうまくいきますが、おもてのえがひょうじされているときに、スプライトを押されてもなにもしないように

「もし「コスチュームの番号＝1」（1はうらのカードのコスチューム）なら、
「コスチュームをおもてのえ（たとえば「Cat-a」）にする」のようにしておきましょう。

https://scratch.mit.edu/projects/1078287152

みどりのはたをおすと、ハートが２つひょうじされ、２つとも、おされるとハートがねこにかわります。

### どのしゅるいのカードがめくれたか、２まいめのカードがおなじしゅるいかはんだんする（ステップ４）
さいしょにめくったカードがどのしゅるいかをおぼえておくため「開いたカード」というへんすうをさくせいします。

このへんすうはなにもめくっていないときは-1にしておいて、しゅるいごとに1〜10までのあたいにへんこうします。
いまつくったスプライトの２くみのカードのしゅるいは1にします。

「開いたカード」をさくせいし、「みどりのはたが押されたとき」のさいごの「並び替えを送る」のまえに、
「開いたカードを-1にする」をついかします。

つぎに、このスプライトが押されたときの「コスチュームをおもてのえ（たとえば「Cat-a」）にする」のあとに

「もし開いたカード＜0なら」「開いたカードを1にする」

でなければ、

「もし開いたカード＝1でないなら」「開いたカードを-1にする」

をついかします。

これで、カードがひらいてなければ、ひらいたカードのしゅるいをせっていし、
カードがひらいていて、しゅるいがあわなければ、ひらいていないことにします。

https://scratch.mit.edu/projects/1078291573

みどりのはたをおすと、ハートが２つひょうじされ、２つとも、おされるとハートがねこにかわるとともに
「開いたカード」が-1から1にかわります。

### おなじしゅるいのカードが２まいめくれたらとりのぞく、そうでなければうらにもどす（ステップ５）
２まいカードがめくれたばあい、それらがおなじカードならとりのぞき、そうでなければうらにもどすひつようがあります。

そこで「カードチェック」というイベントをさくせいし、「開いたカード<0なら」の「でなければ」のさいごに「「カードチェック」を送る」をついかします。

そして、「「カードチェック」を受け取ったら」をついかして、そのあとに
「もし〜なら、でなければ」をついかして、

- もし「開いたカード＝1」（あたり）なら
	- ２秒待つ
	- 開いたカードを-1（ひらいたカードなし）にする
	- 隠す（カードをとりのぞく）
	- このクローンを削除する
	
- でなければ（はずれ）
	- もし「コスチュームの番号」＝1ではない（カードがおもてをむいている）なら
		- 2秒待つ
		- コスチュームをうら（たとえば「heart red」）にする
		
をついかします。

なお、「開いたカード」のチェックをはずし、ひょうじしないようにします。

https://scratch.mit.edu/projects/1078827905

みどりのはたをおすと、ハートが２つひょうじされ、おされるとハートがねこにかわり、ねこが２ひきそろうときえます。

### 「残りの枚数」と「失敗回数」をさくせいする（ステップ６）
「残りの枚数」というへんすうと「失敗回数」というへんすうをついかします。

ひょうじするばしょを「残りの枚数」はみぎうえに、「失敗回数」はひだりうえにそれぞれうごかします。

「みどりのはたが押されたとき」のさいごの「並び替えを送る」のまえに、「残り枚数」を20にすると
「失敗回数」を0にするをついかします。

「残りの枚数」がへるのは、カードがきえるときなので、「カードチェック」を受け取ったらのなかの
「隠す」のあとに、「残り枚数」を-1ずつ変えるをついかします。

「失敗回数」がふえるのは、ステップ４の「もし開いたカード＝1でないなら」のときなので、
このスプライトが押されたときの、「もし開いたカード＝1でないなら」「開いたカードを-1にする」の
すぐあとに「失敗回数」を1ずつ変えるをついかします。

https://scratch.mit.edu/projects/1078830751

みどりのはたをおすと、ハートが２つひょうじされ、おされるとハートがねこにかわり、ねこが２ひきそろうときえ、残りの枚数が20から2つへって18になります。

なお、いまはカードはおなじしゅるいの２まいしかないため、ぜったいにしっぱいしないので、「失敗回数」は0のままです。

### カードのしゅるいをふやす（ステップ７）
いまはおなじしゅるいのカード１くみしかないので、もう１くみべつのしゅるいのかーどをついかします。

みぎしたのスプライトをみぎクリックして「複製」をえらんで、スプライトをまるごとコピーします。

コピーしたスプライト（なまえが「Heart2」などにかわっている）の「コスチューム」タブをえらび、ひだりがわのコスチュームの２ばんめ（たとえばねこ）をえらび、ごみばこをクリックしてさくじょします。

ひだりしたの「コスチュームをえらぶ」からあたらしいおもてのカードのえ（たとえばいぬ）をえらびます。

- 「コード」タブをえらび、「みどりのはたが押されたとき」のブロックをブロックごとすべてさくじょします。

- 「「並び替え」を受け取ったとき」のブロックの「順番の1番目」のぶぶんをすべて「順番の3番目」にかきかえ、「クローンされたとき」のブロックの「順番の2番目」のぶぶんをすべて「順番の4番目」にかきかえます。

- 「このスプライトが押されたとき」のブロックで
	- コスチュームをおもてのえ（たとえば「Cat-a」）にするのぶぶんを、あらたについかしたコスチュームのなまえ（たとえば「Dog1-a」）にへんこうします。
	- 「開いたカード」を1にするおよび「開いたカード」＝1ではないの「1」を「2」にかきかえます。
	
- さいごに、「カードチェックを受け取ったとき」の「開いたカード」＝1ならの「1」を「2」にかきかえます。
 
https://scratch.mit.edu/projects/1078852195

みどりのはたをおすと、ハートが４つひょうじされ、ねことねこまたはいぬといぬなら、カードがきえて残りの枚数が2まいずつへり、ねこといぬならハートにもどって失敗回数が1つずつふえます。

### カードのしゅるいを10しゅるいにする（ステップ８）

ステップ７とおなじことをくりかえします。

ただし、コピーもとのスプライトをオリジナル（１ばんひだりうえのスプライト）いがいのコピーしたスプライトをえらべば、「「みどりのはたが押されたとき」のブロックをブロックごとすべてさくじょします。」のぶぶんはふようになります。

すうじをかきかえるぶぶんはしゅるいごとにつぎのようにかえていきます。３しゅるいめいこうがこれからつくるカードのすうじです。

- １しゅるいめのカード（さくせいずみ）

	順番の1番目、順番の2番目、開いたカード1
　
- ２しゅるいめのカード（さくせいずみ）

	順番の3番目、順番の4番目、開いたカード2

- ３しゅるいめのカード

	順番の5番目、順番の6番目、開いたカード3
　
- ４しゅるいめのカード

	順番の7番目、順番の8番目、開いたカード4
	
- ５しゅるいめのカード（さくせいずみ）

	順番の9番目、順番の10番目、開いたカード5
　
- ６しゅるいめのカード（さくせいずみ）

	順番の11番目、順番の12番目、開いたカード6

- ７しゅるいめのカード

	順番の13番目、順番の14番目、開いたカード7
　
- ８しゅるいめのカード

	順番の15番目、順番の16番目、開いたカード8
	
- ９しゅるいめのカード

	順番の17番目、順番の18番目、開いたカード9
　
- １０しゅるいめのカード

	順番の19番目、順番の20番目、開いたカード10
	
おもてのえはしゅるいごとぜんぶかえてください。

たいへんだけどまちがえないようにつくりましょう。

かんせいしたものはつぎのとおりです。

https://scratch.mit.edu/projects/1078871966

みどりのはたをおすと、ハートが20こひょうじされ、
おなじしゅるいのカードをひらくとカードがきえて「残り枚数」がへり、
ちがうしゅるいのカードをひらくとハートにもどって「失敗回数」がふえます。

### ぜんぶきえたらはいけいをかえる（ステップ９、かんせい）
さいごに、ぜんぶけせたら、はいけいをかえてゲームがおわりをひょうじしましょう。

いちばんみぎしたの「背景を選ぶ」をクリックしてゲームがおわったときのはいけいをえらびます。
れいでは、「Hearts」にしましたが、じぶんのすきなはいけいでかまいません。

はいけいそのままでもかまいませんが、「背景」タブをえらび、
わかりやすいように「おめでとう」などのことばをついかするとよいでしょう。

ここまでできたら、オリジナルのスプライト（１ばんひだりうえ）をえらんで「コード」タブをえらび
「みどりのはたが押されたとき」のブロックのせんとうに「背景を背景1にする」をついかします。

さいごに、「みどりのはたが押されたとき」のブロックのおしりに「「残り枚数」＝0まで待つ」と「背景を（追加した背景、たとえば「Heats」）にする」をついかします。

https://scratch.mit.edu/projects/1078152121

すべてのカードをクリアすると背景がハートマークの「おめでとう」にかわります。
